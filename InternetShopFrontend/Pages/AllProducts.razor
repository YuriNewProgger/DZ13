@page "/AllProducts"
@using ShopAPI

@inject ClientAPI _client

<h3>All products</h3>

@if (_products != null)
{
    <ul>
        @foreach (var item in _products)
        {
            <li>
                <span>@item.Title @item.Price <button class="btn btn-outline-success" @onclick="() => Buy(item)">Buy</button></span>
            </li>
        }
    </ul>
}


@code {
    public void Buy(Product _product)
    {
        //backet.AddProductToBasket(_product);
    }
    
    private List<Product> _products;
    
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        _products  = await _client.GetProducts();
    }
}